From 5f833d73290bd3623bf22caffaed599381d454d9 Mon Sep 17 00:00:00 2001
From: Micah Lee <micah@micahflee.com>
Date: Mon, 11 May 2015 19:20:30 -0400
Subject: [PATCH] execute ./start-tor-browser.desktop instead of
 ./Browser/start-tor-browser (#176)

---
 torbrowser_launcher/common.py   | 3 ++-
 torbrowser_launcher/launcher.py | 2 +-
 2 files changed, 3 insertions(+), 2 deletions(-)

Index: b/torbrowser_launcher/common.py
===================================================================
--- a/torbrowser_launcher/common.py	2016-01-15 20:53:04.682748223 +0100
+++ b/torbrowser_launcher/common.py	2016-01-15 20:53:04.934748231 +0100
@@ -145,7 +145,8 @@
                 'update_check_file': tbb_cache+'/download/RecommendedTBBVersions',
                 'tbb': {
                     'dir': tbb_local+'/tbb/'+self.architecture,
-                    'start': tbb_local+'/tbb/'+self.architecture+'/tor-browser_'+self.language+'/Browser/start-tor-browser',
+                    'dir_tbb': tbb_local+'/tbb/'+self.architecture+'/tor-browser_'+self.language,
+                    'start': tbb_local+'/tbb/'+self.architecture+'/tor-browser_'+self.language+'/start-tor-browser.desktop',
                     'versions': tbb_local+'/tbb/'+self.architecture+'/tor-browser_'+self.language+'/Browser/TorBrowser/Docs/sources/versions',
                 },
             }
Index: b/torbrowser_launcher/launcher.py
===================================================================
--- a/torbrowser_launcher/launcher.py	2016-01-15 20:53:04.682748223 +0100
+++ b/torbrowser_launcher/launcher.py	2016-01-15 20:53:04.934748231 +0100
@@ -634,7 +634,7 @@
                 gtk.main_iteration_do(True)
 
         # run Tor Browser
-        subprocess.call([self.common.paths['tbb']['start'], '--detach'])
+        subprocess.call([self.common.paths['tbb']['start']], cwd=self.common.paths['tbb']['dir_tbb'])
 
         if run_next_task:
             self.run_task()
